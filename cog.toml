from_latest_tag = true
tag_prefix = "v"
branch_whitelist = ["main"]

# Pre-bump: update version in Directory.Build.props and stage it
pre_bump_hooks = [
    """sed -i.bak -E \
      -e 's|<Version>[^<]*</Version>|<Version>{{version}}</Version>|' \
      -e 's|<AssemblyVersion>[^<]*</AssemblyVersion>|<AssemblyVersion>{{version}}.0</AssemblyVersion>|' \
      -e 's|<FileVersion>[^<]*</FileVersion>|<FileVersion>{{version}}.0</FileVersion>|' \
      -e 's|<InformationalVersion>[^<]*</InformationalVersion>|<InformationalVersion>{{version}}</InformationalVersion>|' \
      Directory.Build.props && rm -f Directory.Build.props.bak""",
    "git add Directory.Build.props",
]

[commit_types]
feat = { changelog_title = "Features", bump_minor = true }
fix = { changelog_title = "Bug Fixes", bump_patch = true }
perf = { changelog_title = "Performance", bump_patch = true }
refactor = { changelog_title = "Refactoring", bump_patch = true }
docs = { changelog_title = "Documentation", bump_patch = true }
style = { changelog_title = "Style", bump_patch = true }
test = { changelog_title = "Tests", bump_patch = true }
ci = { changelog_title = "CI/CD", bump_patch = true }
chore = { changelog_title = "Miscellaneous", bump_patch = true }
build = { changelog_title = "Build", bump_patch = true }

[changelog]
path = "CHANGELOG.md"
authors = []
